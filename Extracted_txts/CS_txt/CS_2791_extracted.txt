358

  

Chapter 11. Planning

 

 

procedure CHOOSE-OPERATOR(plan, operators, Speeds €)

choose a step S.i¢ from operators or STEPS( plan) that has ¢wie as an effect
such that = UNIFY(C, cai. BiNDINGS( plan)):
if there is no such step
then fail
add u to BiNpinGs( plan)
add Said + Sneedt0 LINKS( plan)
add Suid < Sneed to ORDERINGS( plan)
if Sua is a newly added step from operators then
add Sqa¢ to STEPS( plan)
add Start = Suid < Finish to ORDERINGS( plan)

procedure RESOLVE-THREATS(plan)

for each S,; *. S;in Links( plan) do
for each Stiye: in STEPS( plan) do
for each c’ in EFFECT(Stiveu) dO
if SUBST(BINDINGS( plan), c) = SUBST(BINDINGS( plan), > c’) then.
choose either
Promotion: Add Sjirea < Si to ORDERINGS( plan)
Demotion: Add S; < Stivear to ORDERINGS( plan)
if not CONSISTENT( plan)
then fail
end
end
end

 

 

 

 

Figure 11.14 Support for partially instantiated operators in POP.

 

  
    
  
 

ifwe adopt the "resolve-later" approach, then there will be possible threats that are not resolved j
away. We therefore need some way of checking that these threats are all gone before we return
the plan. It tums out that ifthe initial state contains no variables and if every operator mentions
all its variables in its precondition, then any complete plan generated by POP is guaranteed to be
fully instantiated. Otherwise we will need to change the function SOLUTION? to check that there
are no uninstantiated variables and choose bindings for them if there are. If this is done, then
POP is guaranteed to be a sound planner in all cases.

Itis harder to see that POP is complete—thatis, finds a solution whenever one exists—but ;
again it comes down to understanding how the algorithm mirrors the definition of achievement.
The algorithm generates every possible plan that satisfies part (1), and then filters out those plans
that do not satisfy part (2) or that are inconsistent. Thus, if there is a plan that is a solution, POP jj
will find it. So ifyou accept the definition of solution (page 349), you should accept that POP is
a sound and complete planner.
